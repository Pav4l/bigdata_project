# üï∑Ô∏è MyParser ‚Äî Scrapy + PostgreSQL + Selenium + PySpark

–ü—Ä–æ–µ–∫—Ç **MyParser** ‚Äî —ç—Ç–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π –≤–µ–±-–ø–∞—Ä—Å–µ—Ä –Ω–∞ –±–∞–∑–µ [Scrapy](https://scrapy.org/),  
–∫–æ—Ç–æ—Ä—ã–π —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å–∞–π—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Selenium** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ AJAX-–∫–æ–Ω—Ç–µ–Ω—Ç–∞  
–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö **PostgreSQL** —á–µ—Ä–µ–∑ **SQLAlchemy**.  
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é **PySpark**.

---

## ‚öôÔ∏è –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **Scrapy** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –≤–µ–±-–ø–∞—Ä—Å–∏–Ω–≥–∞  
- **Selenium Chrome** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ JavaScript-–¥–∏–Ω–∞–º–∏–∫–∏  
- **PostgreSQL + SQLAlchemy** ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ ORM-–¥–æ—Å—Ç—É–ø  
- **PySpark** ‚Äî –æ—á–∏—Å—Ç–∫–∞, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö  
- **Docker Compose** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –æ–∫—Ä—É–∂–µ–Ω–∏—è  
- **pgAdmin** ‚Äî –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö  

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
myparser/
‚îÇ
‚îú‚îÄ‚îÄ scrapy.cfg
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ README.md
‚îÇ
‚îî‚îÄ‚îÄ myparser/
‚îú‚îÄ‚îÄ init.py
‚îú‚îÄ‚îÄ items.py
‚îú‚îÄ‚îÄ middlewares.py
‚îú‚îÄ‚îÄ pipelines.py
‚îú‚îÄ‚îÄ settings.py
‚îî‚îÄ‚îÄ spiders/
‚îú‚îÄ‚îÄ init.py
‚îî‚îÄ‚îÄ my_spider.py
```

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/Pav4l/bigdata_project/tree/main/parsing/task2/myparser.git
cd bigdata_project/parsing/task2/myparser
```

### 2. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ 

```bash
docker compose up -d
```

### 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ settings.py

```python
DATABASE_URL = "postgresql://postgres:postgres@db:5432/myparser_db"
```

### 4. –ó–∞–ø—É—Å–∫ –ø–∞—É–∫–∞ (–∏–∑ Docker)
```bash
docker-compose exec scrapy bash
# –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞
scrapy crawl my_spider -O result.json
```

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose down 

#–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ —Ç–æ–º–∞ (—á–∏—Å—Ç—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫)
docker compose down -v
docker compose up -d

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker compose logs -f scrapy

```

–ü–∞—Ä—Å–µ—Ä:
- –æ–±—Ö–æ–¥–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π;
- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Selenium –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞;
- —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ (URL, –∑–∞–≥–æ–ª–æ–≤–æ–∫, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ü–µ–Ω—É, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ —Ç.–¥.) –≤ PostgreSQL.